name: Pylone automations

on:
  push:
    branches:
    - master

jobs:
  publish:
    name: Publish pylone
    runs-on: ubuntu-latest
    steps:
      - name: Install deps
        run: |
          pip3 install setuptools==45.1.0
          pip3 install twine==3.1.1
      - name: Checkout
        uses: actions/checkout@v2
      - name: list files
        run: pip3 --version
      - name: Building pylone
        run: python3 setup.py sdist bdist_wheel
      - name: Publishing
        run: twine upload --repository-url https://test.pypi.org/legacy/ dist/* -u mathix420 -p ${{ secrets.PYPI_PASSWORD }}
